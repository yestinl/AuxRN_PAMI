version: 1
kind: group
build:
    image: docker.dm-ai.cn/algorithm-research/matteraux:latest
hptuning:
    concurrency: 15
    matrix:
        headNum:
            values: [1,2,3,4,8]
        multiMode:
            values: [vis,ins,can]
        thr:
            values: [0.8, 0.85, 0.9, 0.95, 0.99]
        catFeat:
            values: ["none", "he", "angle"]
environment:
    resources:
        cpu:
            requests: 1
            limits: 2
        gpu:
            requests: 1
            limits: 1
    outputs:
        experiments: [10647]


run:
    cmd: python3.6  r2r_src/train.py --upload --denseObj --objthr {{thr}} --headNum 2 --multiMode vis --catfeat={{catFeat}} --name Envdrop_MultiVis2Attn_denseObj_{{thr}}_cat_{{catFeat}}